{% extends 'base.html.twig' %}

{% block title %}Réservations{% endblock %}

{% block page_title %}Liste des réservations{% endblock %}

{% block body %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span class="fw-bold">Réservations</span>
    <a href="{{ path('app_reservation_new') }}" class="btn btn-primary">Nouvelle réservation</a>
  </div>
  <div class="card-body">
    <table class="table table-hover table-bordered table-striped">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Email</th>
          <th>Téléphone</th>
          <th>Date de naissance</th>
          <th>Adresse</th>
          <th>Sexe</th>
          <th>Type</th>
          <th>Status</th>
          <th>Client</th>
          <th>Voyage</th>
          <th>Date réservation</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for reservation in reservations %}
          <tr>
            <td>{{ reservation.nom }}</td>
            <td>{{ reservation.prenom }}</td>
            <td>{{ reservation.email }}</td>
            <td>{{ reservation.telephone }}</td>
            <td>{{ reservation.dateNaissance ? reservation.dateNaissance|date('d/m/Y') : 'N/A' }}</td>
            <td>{{ reservation.adresse }}</td>
            <td>{{ reservation.sexe }}</td>
            <td>{{ reservation.type }}</td>
            <td>{{ reservation.status }}</td>
            <td>{{ reservation.client ? reservation.client.nom : 'N/A' }}</td>
            <td>{{ reservation.voyage ? reservation.voyage.titre : 'N/A' }}</td>
            <td>{{ reservation.dateReservation ? reservation.dateReservation|date('d/m/Y') : 'N/A' }}</td>
            <td class="text-nowrap">
              <a href="{{ path('app_reservation_show', {'id': reservation.id}) }}" class="btn btn-sm btn-primary">Voir</a>
              <a href="{{ path('app_reservation_edit', {'id': reservation.id}) }}" class="btn btn-sm btn-warning">Modifier</a>
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="13" class="text-center">Aucune réservation trouvée.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
