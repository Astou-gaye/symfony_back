{% extends 'base.html.twig' %}

{% block title %}Voyage - Moubarack Voyages{% endblock %}
{% block page_title %}<i class="bx bx-map-marked-alt me-2"></i>Détail Voyage{% endblock %}

{% block body %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <!-- Header avec breadcrumb -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-1">
              <li class="breadcrumb-item"><a href="{{ path('app_voyage_index') }}" class="text-decoration-none">Voyages</a></li>
              <li class="breadcrumb-item active">{{ voyage.destination }} - {{ voyage.typeVoyage }}</li>
            </ol>
          </nav>
          <h4 class="mb-0 fw-bold text-dark">
            <i class="bx bx-map-marked-alt text-primary me-2"></i>
            {{ voyage.destination }} - {{ voyage.typeVoyage }}
          </h4>
        </div>
        <div class="d-flex gap-2">
          <a href="{{ path('app_voyage_edit', {'id': voyage.id}) }}" 
             class="btn btn-outline-primary shadow-sm rounded-3 px-4 py-2 fw-semibold">
            <i class="bx bx-edit me-2"></i>Modifier
          </a>
          <a href="{{ path('app_voyage_index') }}" 
             class="btn btn-primary shadow-sm rounded-3 px-4 py-2 fw-semibold">
            <i class="bx bx-arrow-back me-2"></i>Retour
          </a>
        </div>
      </div>

      <!-- Carte principale -->
      <div class="card border-0 shadow-sm rounded-4">
        <!-- Header de la carte avec icône -->
        <div class="card-header bg-white py-4 px-4 border-bottom">
          <div class="row align-items-center">
            <div class="col-auto">
              <div class="position-relative">
                {% if voyage.typeVoyage == 'Hajj' %}
                    <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center shadow-sm" style="width: 80px; height: 80px; font-weight: 600; font-size: 1.5rem;">
                        <i class="bx bx-home-heart"></i>
                    </div>
                {% elseif voyage.typeVoyage == 'Omra' %}
                    <div class="rounded-circle bg-info text-white d-flex align-items-center justify-content-center shadow-sm" style="width: 80px; height: 80px; font-weight: 600; font-size: 1.5rem;">
                        <i class="bx bx-home-smile"></i>
                    </div>
                {% else %}
                    <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center shadow-sm" style="width: 80px; height: 80px; font-weight: 600; font-size: 1.5rem;">
                        <i class="bx bx-map-pin"></i>
                    </div>
                {% endif %}
                <div class="position-absolute bottom-0 end-0 bg-success rounded-circle border-3 border-white" style="width: 20px; height: 20px;"></div>
              </div>
            </div>
            <div class="col">
              <h5 class="mb-1 fw-bold text-dark">{{ voyage.destination }}</h5>
              <p class="mb-1 text-muted">
                <i class="bx bx-category me-1"></i>
                Type: {{ voyage.typeVoyage }}
              </p>
              <p class="mb-0 text-muted small">
                <i class="bx bx-id-card me-1"></i>
                Voyage #{{ voyage.id }}
              </p>
            </div>
            <div class="col-auto">
              {% if voyage.typeVoyage == 'Hajj' %}
                <div class="d-flex align-items-center">
                  <div class="bg-success bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-home-heart text-success fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">Hajj</div>
                    <div class="small text-muted">Pèlerinage</div>
                  </div>
                </div>
              {% elseif voyage.typeVoyage == 'Omra' %}
                <div class="d-flex align-items-center">
                  <div class="bg-info bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-home-smile text-info fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">Omra</div>
                    <div class="small text-muted">Petit pèlerinage</div>
                  </div>
                </div>
              {% else %}
                <div class="d-flex align-items-center">
                  <div class="bg-primary bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-map text-primary fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">{{ voyage.typeVoyage }}</div>
                    <div class="small text-muted">Type de voyage</div>
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>

        <div class="card-body p-4">
          <div class="row g-4">
            <!-- Informations principales -->
            <div class="col-lg-8">
              <h6 class="text-uppercase text-muted fw-bold mb-4 border-bottom pb-2">
                <i class="bx bx-info-circle text-primary me-2"></i>
                Informations du voyage
              </h6>
              
              <div class="row g-4">
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-world fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Destination</div>
                    <div class="fs-4 fw-bold text-primary mb-0">{{ voyage.destination }}</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-category fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Type de voyage</div>
                    <div class="fs-4 fw-bold text-primary mb-0">{{ voyage.typeVoyage }}</div>
                  </div>
                </div>
                
                <div class="col-12">
                  <div class="border-0 shadow-sm rounded-4 p-4 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-info-circle fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">
                      <i class="bx bx-note me-1"></i>Description
                    </div>
                    <div class="fs-5 fw-bold text-dark">
                      {% if voyage.typeVoyage == 'Hajj' %}
                        Voyage spirituel vers La Mecque pour accomplir le grand pèlerinage (Hajj)
                      {% elseif voyage.typeVoyage == 'Omra' %}
                        Voyage spirituel vers La Mecque pour accomplir le petit pèlerinage (Omra)
                      {% else %}
                        Voyage touristique vers {{ voyage.destination }}
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sidebar avec actions -->
            <div class="col-lg-4">
              <div class="sticky-top" style="top: 2rem;">
                <h6 class="text-uppercase text-muted fw-bold mb-4 border-bottom pb-2">
                  <i class="bx bx-cog text-primary me-2"></i>
                  Actions
                </h6>
                
                <div class="d-grid gap-3">
                  <a href="{{ path('app_voyage_edit', {'id': voyage.id}) }}" 
                     class="btn btn-primary shadow-sm rounded-3 px-4 py-3 fw-semibold">
                    <i class="bx bx-edit me-2"></i>
                    Modifier le voyage
                  </a>
                  
                  <a href="{{ path('app_voyage_index') }}" 
                     class="btn btn-outline-secondary shadow-sm rounded-3 px-4 py-3 fw-semibold">
                    <i class="bx bx-list-ul me-2"></i>
                    Liste des voyages
                  </a>
                  
                  <!-- Carte d'informations système -->
                  <div class="border-0 shadow-sm rounded-4 p-4 position-relative overflow-hidden bg-light mt-3">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-info-circle fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Informations système</div>
                    <div class="small mb-2">
                      <strong class="text-dark">ID:</strong> {{ voyage.id }}
                    </div>
                    <div class="small mb-2">
                      <strong class="text-dark">Créé le:</strong>
                      <span class="text-muted">{{ 'now'|date('d/m/Y à H:i') }}</span>
                    </div>
                    <div class="small text-success">
                      <i class="bx bx-check-circle me-1"></i>
                      Voyage actif
                    </div>
                  </div>
                  
                  <!-- Zone de suppression -->
                  <div class="mt-4 pt-3 border-top border-danger border-opacity-25">
                    <h6 class="text-danger small fw-bold mb-3">
                      <i class="bx bx-trash me-1"></i>
                      Zone dangereuse
                    </h6>
                    <div class="bg-danger bg-opacity-10 rounded-3 p-3 border border-danger border-opacity-25">
                      <p class="small text-danger mb-2">
                        <i class="bx bx-warning me-1"></i>
                        Cette action est irréversible
                      </p>
                      <form method="post" action="{{ path('app_voyage_delete', {'id': voyage.id}) }}" 
                            onsubmit="return confirm('Êtes-vous absolument sûr de vouloir supprimer ce voyage ?');">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ voyage.id) }}">
                        <button type="submit" class="btn btn-outline-danger btn-sm fw-semibold">
                          <i class="bx bx-trash me-2"></i>
                          Supprimer définitivement
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}