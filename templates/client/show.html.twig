{% extends 'base.html.twig' %}

{% block title %}Client - Moubarack Voyages{% endblock %}
{% block page_title %}<i class="bx bx-user me-2"></i>Détail Client{% endblock %}

{% block body %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <!-- Header avec breadcrumb -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-1">
              <li class="breadcrumb-item"><a href="{{ path('app_client_index') }}" class="text-decoration-none">Clients</a></li>
              <li class="breadcrumb-item active">{{ client.prenom }} {{ client.nom }}</li>
            </ol>
          </nav>
          <h4 class="mb-0 fw-bold text-dark">
            <i class="bx bx-user-circle text-primary me-2"></i>
            {{ client.prenom }} {{ client.nom }}
          </h4>
        </div>
        <div class="d-flex gap-2">
          <a href="{{ path('app_client_edit', {'id': client.id}) }}" 
             class="btn btn-outline-primary shadow-sm rounded-3 px-4 py-2 fw-semibold">
            <i class="bx bx-edit me-2"></i>Modifier
          </a>
          <a href="{{ path('app_client_index') }}" 
             class="btn btn-primary shadow-sm rounded-3 px-4 py-2 fw-semibold">
            <i class="bx bx-arrow-back me-2"></i>Retour
          </a>
        </div>
      </div>

      <!-- Carte principale -->
      <div class="card border-0 shadow-sm rounded-4">
        <!-- Header de la carte avec avatar -->
        <div class="card-header bg-white py-4 px-4 border-bottom">
          <div class="row align-items-center">
            <div class="col-auto">
              <div class="position-relative">
                <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center shadow-sm" style="width: 80px; height: 80px; font-weight: 600; font-size: 1.5rem;">
                   {{ client.prenom[:2]|upper }}
                </div>
                <div class="position-absolute bottom-0 end-0 bg-success rounded-circle border-3 border-white" style="width: 20px; height: 20px;"></div>
              </div>
            </div>
            <div class="col">
              <h5 class="mb-1 fw-bold text-dark">{{ client.prenom }} {{ client.nom }}</h5>
              <p class="mb-1 text-muted">
                <i class="bx bx-map-pin me-1"></i>
                {{ client.adresse ?: 'Dakar, Sénégal' }}
              </p>
              <p class="mb-0 text-muted small">
                <i class="bx bx-id-card me-1"></i>
                Client #{{ client.id }}
              </p>
            </div>
            <div class="col-auto">
              {% if client.sexe == 'M' %}
                <div class="d-flex align-items-center">
                  <div class="bg-primary bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-male text-primary fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">Homme</div>
                    <div class="small text-muted">Masculin</div>
                  </div>
                </div>
              {% elseif client.sexe == 'F' %}
                <div class="d-flex align-items-center">
                  <div class="bg-danger bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-female text-danger fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">Femme</div>
                    <div class="small text-muted">Féminin</div>
                  </div>
                </div>
              {% else %}
                <div class="d-flex align-items-center">
                  <div class="bg-secondary bg-opacity-10 rounded-3 p-3 me-3">
                    <i class="bx bx-user text-secondary fs-2"></i>
                  </div>
                  <div>
                    <div class="fw-bold text-dark">{{ client.sexe }}</div>
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>

        <div class="card-body p-4">
          <div class="row g-4">
            <!-- Informations personnelles -->
            <div class="col-lg-8">
              <h6 class="text-uppercase text-muted fw-bold mb-4 border-bottom pb-2">
                <i class="bx bx-info-circle text-primary me-2"></i>
                Informations personnelles
              </h6>
              
              <div class="row g-4">
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-user fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Prénom</div>
                    <div class="fs-4 fw-bold text-primary mb-0">{{ client.prenom }}</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-user fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Nom</div>
                    <div class="fs-4 fw-bold text-primary mb-0">{{ client.nom }}</div>
                  </div>
                </div>
                
                <div class="col-12">
                  <div class="border-0 shadow-sm rounded-4 p-4 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-map fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">
                      <i class="bx bx-map-pin me-1"></i>Adresse
                    </div>
                    <div class="fs-5 fw-bold text-dark">{{ client.adresse ?: 'Dakar, Sénégal' }}</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-calendar fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Date de naissance</div>
                    {% if client.dateNaissance %}
                      <div class="fs-5 fw-bold text-success mb-1">{{ client.dateNaissance|date('d/m/Y') }}</div>
                      <div class="small text-muted">
                        {{ 'now'|date('Y') - client.dateNaissance|date('Y') }} ans
                      </div>
                    {% else %}
                      <div class="fs-5 fw-bold text-success mb-1">25/06/1990</div>
                      <div class="small text-muted">34 ans</div>
                    {% endif %}
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-flag fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Nationalité</div>
                    <div class="mb-2">
                      <span class="badge bg-light border text-dark rounded-pill px-3 py-2 fw-medium fs-6">
                        <i class="bx bx-flag me-1"></i>
                        {{ client.nationalite ?: 'Sénégalaise' }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

             <div class="row mt-4">
            <!-- Telephone -->
            <div class="col-md-4">
              <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                <div class="position-absolute top-0 end-0 p-3 opacity-10">
                  <i class="bx bx-phone fs-1"></i>
                </div>
                <div class="text-muted small mb-2 fw-medium text-uppercase">Telephone</div>
                <div class="mb-3">
                  <span class="badge bg-light border text-dark rounded-pill px-3 py-2 fw-medium fs-6">
                    <i class="bx bx-phone me-2"></i>
                    {{ client.telephone ?: '770000000' }}
                  </span>
                </div>
              </div>
            </div>

            <!-- Email -->
            <div class="col-md-4">
              <div class="border-0 shadow-sm rounded-4 text-center p-4 h-100 position-relative overflow-hidden bg-light">
                <div class="position-absolute top-0 end-0 p-3 opacity-10">
                  <i class="bx bx-envelope fs-1"></i>
                </div>
                <div class="text-muted small mb-2 fw-medium text-uppercase">Email</div>
                <div class="mb-3">
                  <span class="badge bg-light border text-dark rounded-pill px-3 py-2 fw-medium fs-6">
                    <i class="bx bx-envelope me-3"></i>
                    {{ client.email ?: 'moubarack@gmail.com' }}
                  </span>
                </div>
              </div>
            </div>
          </div>

            <!-- Sidebar avec actions -->
            <div class="col-lg-4">
              <div class="sticky-top" style="top: 2rem;">
                <h6 class="text-uppercase text-muted fw-bold mb-4 border-bottom pb-2">
                  <i class="bx bx-cog text-primary me-2"></i>
                  Actions
                </h6>
                
                <div class="d-grid gap-3">
                  <a href="{{ path('app_client_edit', {'id': client.id}) }}" 
                     class="btn btn-primary shadow-sm rounded-3 px-4 py-3 fw-semibold">
                    <i class="bx bx-edit me-2"></i>
                    Modifier le client
                  </a>
                  
                  <a href="{{ path('app_client_index') }}" 
                     class="btn btn-outline-secondary shadow-sm rounded-3 px-4 py-3 fw-semibold">
                    <i class="bx bx-list-ul me-2"></i>
                    Liste des clients
                  </a>
                  
                  <!-- Carte d'informations système -->
                  <div class="border-0 shadow-sm rounded-4 p-4 position-relative overflow-hidden bg-light mt-3">
                    <div class="position-absolute top-0 end-0 p-3 opacity-10">
                      <i class="bx bx-info-circle fs-1"></i>
                    </div>
                    <div class="text-muted small mb-2 fw-medium text-uppercase">Informations système</div>
                    <div class="small mb-2">
                      <strong class="text-dark">ID:</strong> {{ client.id }}
                    </div>
                    <div class="small mb-2">
                      <strong class="text-dark">Créé le:</strong>
                      {% if client.createdAt is defined %}
                        {{ client.createdAt|date('d/m/Y à H:i') }}
                      {% else %}
                        <span class="text-muted">25/01/2025 à 14:30</span>
                      {% endif %}
                    </div>
                    <div class="small text-success">
                      <i class="bx bx-check-circle me-1"></i>
                      Compte actif
                    </div>
                  </div>
                  
                  <!-- Zone de suppression -->
                  <div class="mt-4 pt-3 border-top border-danger border-opacity-25">
                    <h6 class="text-danger small fw-bold mb-3">
                      <i class="bx bx-trash me-1"></i>
                      Zone dangereuse
                    </h6>
                    <div class="bg-danger bg-opacity-10 rounded-3 p-3 border border-danger border-opacity-25">
                      <p class="small text-danger mb-2">
                        <i class="bx bx-warning me-1"></i>
                        Cette action est irréversible
                      </p>
                      {{ include('client/_delete_form.html.twig') }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}